% Generator: GNU source-highlight, by Lorenzo Bettini, http://www.gnu.org/software/src-highlite
\noindent
\mbox{}\textbf{\textcolor{Blue}{def}}\ mochila\textcolor{BrickRed}{(}capacidad\textcolor{BrickRed}{,}\ pesos\textcolor{BrickRed}{,}\ beneficios\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{def}}\ generar\textcolor{BrickRed}{()} \\
\mbox{}\ \ \ \ \ \ \ \ posibles$\_$mochilas\ \textcolor{BrickRed}{=}\ new\ Priority\ Queue \\
\mbox{}\ \ \ \ \ \ \ \ posibles$\_$mochilas\textcolor{BrickRed}{.}push\textcolor{BrickRed}{([])} \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{while}}\ \textcolor{BrickRed}{(}\textbf{\textcolor{Blue}{not}}\ posibles$\_$mochilas\textcolor{BrickRed}{.}empty?\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ actual\ \textcolor{BrickRed}{=}\ posibles$\_$mochilas\textcolor{BrickRed}{.}pop \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{if}}\ \textcolor{BrickRed}{(}actual\ \textcolor{BrickRed}{==}\ n\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{if}}\ \textcolor{BrickRed}{(}beneficio\textcolor{BrickRed}{(}actual\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{\textgreater{}}\ beneficio\textcolor{BrickRed}{(}solucion\textcolor{BrickRed}{))} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ solucion\ \textcolor{BrickRed}{=}\ actual \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{else}} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{if}}\ \textcolor{BrickRed}{(}peso\textcolor{BrickRed}{(}actual\ \textcolor{BrickRed}{+}\ \textcolor{BrickRed}{[}\textbf{\textcolor{Blue}{true}}\textcolor{BrickRed}{])}\ \textcolor{BrickRed}{$\le$}\ capacidad\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ posibles$\_$mochilas\textcolor{BrickRed}{.}push\textcolor{BrickRed}{(}actual\ \textcolor{BrickRed}{+}\ \textcolor{BrickRed}{[}\textbf{\textcolor{Blue}{true}}\textcolor{BrickRed}{])} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{if}}\ \textcolor{BrickRed}{(}beneficio\textcolor{BrickRed}{(}solucion\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{\textless{}}\\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ beneficio\textcolor{BrickRed}{(}actual\textcolor{BrickRed}{)}\ \textcolor{BrickRed}{+}\ calculaCota\textcolor{BrickRed}{(}actual\ \textcolor{BrickRed}{+}\ \textcolor{BrickRed}{[}\textbf{\textcolor{Blue}{false}}\textcolor{BrickRed}{]))} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ posibles$\_$mochilas\textcolor{BrickRed}{.}push\textcolor{BrickRed}{(}actual\ \textcolor{BrickRed}{+}\ \textcolor{BrickRed}{[}\textbf{\textcolor{Blue}{false}}\textcolor{BrickRed}{])} \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{return}}\ solucion \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{end}} \\
\mbox{} \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{def}}\ beneficio\textcolor{BrickRed}{(}nodo\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{return}}\ $\mathtt{\sum_{i=0}^{\#beneficios} nodo[i]\times beneficios[i]}$ \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{end}} \\
\mbox{} \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{def}}\ peso\textcolor{BrickRed}{(}nodo\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{return}}\ $\mathtt{\sum_{i=0}^{\#pesos} nodo[i]\times pesos[i]}$ \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{end}} \\
\mbox{} \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{def}}\ calculaCota\textcolor{BrickRed}{(}nodo\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ \ \ \ \ w\ \textcolor{BrickRed}{=}\ $\mathtt{\left\{\frac{beneficios[i+\#nodo]}{pesos[i+\#nodo]} : i \in [0..\#pesos]\right\}} $ \\
\mbox{}\ \ \ \ \ \ \ \ beneficio$\_$extra\ \textcolor{BrickRed}{=}\ \textcolor{Purple}{0} \\
\mbox{}\ \ \ \ \ \ \ \ restante\ \textcolor{BrickRed}{=}\ capacidad\ \textcolor{BrickRed}{-}\ peso\textcolor{BrickRed}{(}nodo\textcolor{BrickRed}{)} \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{while}}\ \textcolor{BrickRed}{(}restante\ \textcolor{BrickRed}{\textgreater{}}\ \textcolor{Purple}{0}\ \textbf{\textcolor{Blue}{and}}\ \textcolor{BrickRed}{!}w\textcolor{BrickRed}{.}empty\textcolor{BrickRed}{())} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ restante\ \textcolor{BrickRed}{-=}\ pesos\textcolor{BrickRed}{[}w\textcolor{BrickRed}{.}max\textcolor{BrickRed}{()]} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{if}}\ \textcolor{BrickRed}{(}restante\ \textcolor{BrickRed}{$\ge$}\ \textcolor{Purple}{0}\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ beneficio$\_$extra\ \textcolor{BrickRed}{+=}\ beneficios\textcolor{BrickRed}{[}w\textcolor{BrickRed}{.}max\textcolor{BrickRed}{()]} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{else}} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ beneficio$\_$extra\ \textcolor{BrickRed}{+=} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{BrickRed}{(}\textcolor{Purple}{1}\ \textcolor{BrickRed}{+}\ restante\textcolor{BrickRed}{/}pesos\textcolor{BrickRed}{[}w\textcolor{BrickRed}{.}max\textcolor{BrickRed}{()])}\ \textcolor{BrickRed}{*}\ beneficios\textcolor{BrickRed}{[}w\textcolor{BrickRed}{.}max\textcolor{BrickRed}{()]} \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{return}}\ beneficio$\_$extra \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{end}} \\
\mbox{} \\
\mbox{}\ \ \ \ n\ \textcolor{BrickRed}{=}\ \#pesos \\
\mbox{}\ \ \ \ solucion\ \textcolor{BrickRed}{=}\ \textcolor{BrickRed}{[}\textbf{\textcolor{Blue}{false}}\textcolor{BrickRed}{,}\ \textcolor{BrickRed}{...,}\ \textbf{\textcolor{Blue}{false}}\textcolor{BrickRed}{]} \\
\mbox{} \\
\mbox{}\ \ \ \ \textbf{\textcolor{Blue}{return}}\ generar\textcolor{BrickRed}{()} \\
\mbox{} \\
\mbox{}\textbf{\textcolor{Blue}{end}} \\
\mbox{}
